<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PetAdopt - All Pets</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav>
        <div class="logo">PawsAndHomes</div>
        <ul class="nav-links">
            <li><a href="home.html">Home</a></li>
            <li><a href="pets.html" class="active">Pets</a></li>
            <li><a href="doc.html">Docs</a></li>
            <li><a href="contact.html">Contact</a>
            <li><a href="reportstray.html">Report Stray</a>
            </li>
        </ul>
        <div class="user-profile" id="profileDropdown">
    <i class="fas fa-user-circle"></i>
    <div class="dropdown-content" id="myDropdown">
        <div class="user-status">
            <p>Welcome!</p>
            <span id="userNameDisplay">Guest User</span>
        </div>
        <hr>
        <a href="dashboard.html"><i class="fas fa-th-large"></i> Dashboard</a>
        <a href="index.html" class="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
</div>
    </nav>


            
    <div c id="filterBar" class="minimal-filter-bar">
        <div class="filter-item flex-2">
            <div class="input-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search pets...">
            </div>
        </div>

        <div class="filter-item">
            <select id="speciesFilter">
                <option value="all">Species</option>
                <option value="dog">Dog</option>
                <option value="cat">Cat</option>
                <option value="others">Others</option>
            </select>
        </div>

        <div class="filter-item small-width">
            <input type="number" id="ageFilter" placeholder="Max Age">
        </div>

        <div class="filter-item">
            <select id="genderFilter">
                <option value="all">Gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>

        <div class="filter-actions">
            <button id="searchBtn" class="btn-primary-mini">
                <i class="fas fa-filter"></i> Search
            </button>
            <button id="resetFilters" class="btn-icon-mini" title="Reset">
                <i class="fas fa-redo-alt"></i>
            </button>
        </div>
    </div>
</div>
        <div id="allPetsGrid" class="grid-layout">
            </div>
    </div>

    <script type="module" src="Script/uiScript.js"></script>
    <script type="module" src="Script/petUpload.js"></script>

    <script>
        // Real-time filter logic
const searchInput = document.getElementById("searchInput");
const speciesFilter = document.getElementById("speciesFilter");
const ageFilter = document.getElementById("ageFilter");
const genderFilter = document.getElementById("genderFilter");
function applyFilters() {
    const searchText = searchInput.value.toLowerCase();
    const species = speciesFilter.value;
    const maxAge = ageFilter.value;
    const gender = genderFilter.value;

    const pets = document.querySelectorAll(".pet-card");

    pets.forEach(pet => {
        // The Fix: Added (pet.dataset.name || "") 
        // This provides a fallback so .toLowerCase() never runs on 'undefined'
        const name = (pet.dataset.name || "").toLowerCase();
        const petSpecies = pet.dataset.species || "";
        const petAge = pet.dataset.age || "";
        const petGender = pet.dataset.gender || "";

        let visible = true;

        if (searchText && !name.includes(searchText)) visible = false;
        if (species !== "all" && petSpecies !== species) visible = false;
        if (maxAge && Number(petAge) > Number(maxAge)) visible = false;
        if (gender !== "all" && petGender !== gender) visible = false;

        pet.style.display = visible ? "block" : "none";
    });
}
    </script>
</body>
</html>